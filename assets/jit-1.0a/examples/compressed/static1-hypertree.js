var Log={elem:$("log"),write:function(A){if(!this.elem){this.elem=$("log")}this.elem.set("html",A)}};function init(){Infovis.initLayout();var J={id:"347_0",name:"Nine Inch Nails",children:[{id:"126510_1",name:"Jerome Dillon",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[{id:"52163_2",name:"Howlin' Maggie",data:[{key:"Jerome Dillon",value:"member of band"}],children:[]},{id:"324134_3",name:"nearLY",data:[{key:"Jerome Dillon",value:"member of band"}],children:[]}]},{id:"173871_4",name:"Charlie Clouser",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[]},{id:"235952_5",name:"James Woolley",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[]},{id:"235951_6",name:"Jeff Ward",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[{id:"2382_7",name:"Ministry",data:[{key:"Jeff Ward",value:"member of band"}],children:[]},{id:"2415_8",name:"Revolting Cocks",data:[{key:"Jeff Ward",value:"member of band"}],children:[]},{id:"3963_9",name:"Pigface",data:[{key:"Jeff Ward",value:"member of band"}],children:[]},{id:"7848_10",name:"Lard",data:[{key:"Jeff Ward",value:"member of band"}],children:[]}]},{id:"235950_11",name:"Richard Patrick",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[{id:"1007_12",name:"Filter",data:[{key:"Richard Patrick",value:"member of band"}],children:[]},{id:"327924_13",name:"Army of Anyone",data:[{key:"Richard Patrick",value:"member of band"}],children:[]}]},{id:"2396_14",name:"Trent Reznor",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[{id:"3963_15",name:"Pigface",data:[{key:"Trent Reznor",value:"member of band"}],children:[]},{id:"32247_16",name:"1000 Homo DJs",data:[{key:"Trent Reznor",value:"member of band"}],children:[]},{id:"83761_17",name:"Option 30",data:[{key:"Trent Reznor",value:"member of band"}],children:[]},{id:"133257_18",name:"Exotic Birds",data:[{key:"Trent Reznor",value:"member of band"}],children:[]}]},{id:"36352_19",name:"Chris Vrenna",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[{id:"1013_20",name:"Stabbing Westward",data:[{key:"Chris Vrenna",value:"member of band"}],children:[]},{id:"3963_21",name:"Pigface",data:[{key:"Chris Vrenna",value:"member of band"}],children:[]},{id:"5752_22",name:"Jack Off Jill",data:[{key:"Chris Vrenna",value:"member of band"}],children:[]},{id:"33602_23",name:"Die Warzau",data:[{key:"Chris Vrenna",value:"member of band"}],children:[]},{id:"40485_24",name:"tweaker",data:[{key:"Chris Vrenna",value:"is person"}],children:[]},{id:"133257_25",name:"Exotic Birds",data:[{key:"Chris Vrenna",value:"member of band"}],children:[]}]},{id:"236021_26",name:"Aaron North",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[]},{id:"236024_27",name:"Jeordie White",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[{id:"909_28",name:"A Perfect Circle",data:[{key:"Jeordie White",value:"member of band"}],children:[]},{id:"237377_29",name:"Twiggy Ramirez",data:[{key:"Jeordie White",value:"is person"}],children:[]}]},{id:"235953_30",name:"Robin Finck",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[{id:"1440_31",name:"Guns N' Roses",data:[{key:"Robin Finck",value:"member of band"}],children:[]}]},{id:"235955_32",name:"Danny Lohner",data:[{key:"Nine Inch Nails",value:"member of band"}],children:[{id:"909_33",name:"A Perfect Circle",data:[{key:"Danny Lohner",value:"member of band"}],children:[]},{id:"1695_34",name:"Killing Joke",data:[{key:"Danny Lohner",value:"member of band"}],children:[]},{id:"1938_35",name:"Methods of Mayhem",data:[{key:"Danny Lohner",value:"member of band"}],children:[]},{id:"5138_36",name:"Skrew",data:[{key:"Danny Lohner",value:"member of band"}],children:[]},{id:"53549_37",name:"Angkor Wat",data:[{key:"Danny Lohner",value:"member of band"}],children:[]},{id:"113510_38",name:"Puscifer",data:[{key:"Danny Lohner",value:"member of band"}],children:[]},{id:"113512_39",name:"Renhold\u00ebr",data:[{key:"Danny Lohner",value:"is person"}],children:[]}]}],data:[]};var I=$("infovis");var H=I.offsetWidth,E=I.offsetHeight;var C,B,F;var D=new Canvas("mycanvas",{injectInto:"infovis",width:H,height:E,styles:{fillStyle:"#ddd",strokeStyle:"#ddd"},backgroundCanvas:{styles:{fillStyle:"#ccc",strokeStyle:"#ccc"},impl:{init:$empty,plot:function(M,L){L.beginPath();L.arc(0,0,((H<E)?H:E)/2,0,Math.PI*2,true);L.stroke();L.closePath()}}}});var G=new Hypertree(D,{onBeforeCompute:function(L){Log.write("centering")},getName:function(M,L){for(var N=0;N<M.data.length;N++){var O=M.data[N];if(O.key==L.name){return O.value}}for(var N=0;N<L.data.length;N++){var O=L.data[N];if(O.key==M.name){return O.value}}},onCreateLabel:function(N,L){var M=$(N);M.set("tween",{duration:300}).set("html",L.name).setOpacity(0.8).addEvents({click:function(O){G.onClick(M.id)},mouseenter:function(){M.tween("opacity",1)},mouseleave:function(){M.tween("opacity",0.8)}})},onPlaceLabel:function(L,O){var N=L.offsetWidth;var M=L.style.left.toInt();M-=N/2;L.style.left=M+"px"},onAfterCompute:function(){Log.write("done");var O=GraphUtil.getClosestNodeToOrigin(G.graph,"pos");var N=this;var M="<h4>"+O.name+"</h4><b>Connections:</b>";M+="<ul>";GraphUtil.eachAdjacency(O,function(P){var Q=P.nodeTo;if(Q.data&&Q.data.length>0){M+="<li>"+Q.name+' <div class="relation">(relation: '+N.getName(O,Q)+")</div></li>"}});M+="</ul>";$("inner-details").set("html",M);var L=GraphPlot;GraphUtil.eachNode(G.graph,function(P){if(P.id!=O.id&&!O.adjacentTo(P)){L.hideLabel(P)}})}});G.loadTreeFromJSON(J);G.refresh();var A=$("mycanvas");var K=D.getSize();A.addEvent("click",function(M){var N=A.getPosition();var L=Math.min(K.width,K.height)/2;G.move({x:(M.page.x-N.x-K.width/2)/L,y:(M.page.y-N.y-K.height/2)/L})});G.controller.onAfterCompute()};
