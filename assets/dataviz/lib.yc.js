(function(){window.$=function(b){return document.getElementById(b)};$.empty=function(){};$.type=(function(){var d=Object.prototype.toString,c=/^\[object\s(.*)\]$/,b=function(f){return d.call(f).match(c)[1].toLowerCase()};return function(f){var g=b(f);if(g!="object"){return g}if(f.$$family){return f.$$family}return(f&&f.nodeName&&f.nodeType==1)?"element":g}})();(function(){function b(h){var g=$.type(h),d;if(g=="object"){d={};for(var j in h){d[j]=b(h[j])}return d}else{if(g=="array"){d=[];for(var f=0,c=h.length;f<c;f++){d[f]=b(h[f])}return d}else{return h}}}$.merge=function(){var h={};for(var g=0,c=arguments.length;g<c;g++){var d=arguments[g];if($.type(d)!="object"){continue}for(var f in d){var k=d[f],j=h[f];if(j&&$.type(k)=="object"&&$.type(j)=="object"){h[f]=$.merge(j,k)}else{h[f]=b(k)}}}return h}})();window.IO={};var a=function(b){b=$.merge({url:"http://philogb.github.com/",method:"GET",async:true,noCache:false,sendAsBinary:false,onProgress:$.empty,onSuccess:$.empty,onError:$.empty,onAbort:$.empty,onComplete:$.empty},b||{});this.opt=b;this.initXHR()};a.State={};["UNINITIALIZED","LOADING","LOADED","INTERACTIVE","COMPLETED"].forEach(function(c,b){a.State[c]=b});a.prototype={initXHR:function(){var c=this.req=new XMLHttpRequest(),b=this;["Progress","Error","Abort","Load"].forEach(function(d){c["on"+d.toLowerCase()]=function(f){b["handle"+d](f)}})},send:function(b){var f=this.req,c=this.opt,d=c.async;if(c.noCache){c.url+=(c.url.indexOf("?")>=0?"&":"?")+$.uid()}f.open(c.method,c.url,d);if(d){f.onreadystatechange=function(g){if(f.readyState==a.State.COMPLETED){if(f.status==200){c.onSuccess(f.responseText)}else{c.onError(f.status)}}}}if(c.sendAsBinary){f.sendAsBinary(b||c.body||null)}else{f.send(b||c.body||null)}if(!d){if(f.status==200){c.onSuccess(f.responseText)}else{c.onError(f.status)}}},setRequestHeader:function(c,b){this.req.setRequestHeader(c,b);return this},handleProgress:function(b){if(b.lengthComputable){this.opt.onProgress(b,Math.round(b.loaded/b.total*100))}else{this.opt.onProgress(b,-1)}},handleError:function(b){this.opt.onError(b)},handleAbort:function(){this.opt.onAbort(e)},handleLoad:function(b){this.opt.onComplete(b)}};IO.XHR=a})();
